{"ast":null,"code":"var _jsxFileName = \"/home/scancino/Projects/Cinte-Test-Net/frontend/src/components/ReporteFidelizacion.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { reporteAPI } from '../services/api';\nimport { saveAs } from 'file-saver';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ReporteFidelizacion = ({\n  onError\n}) => {\n  _s();\n  const [generando, setGenerando] = useState(false);\n  const handleGenerarReporte = async () => {\n    try {\n      setGenerando(true);\n      const response = await reporteAPI.generarFidelizacion();\n      const blob = new Blob([response.data], {\n        type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'\n      });\n      const fecha = new Date().toISOString().split('T')[0];\n      const filename = `reporte_fidelizacion_${fecha}.xlsx`;\n      saveAs(blob, filename);\n    } catch (error) {\n      console.error('Error al generar reporte:', error);\n      if (error.response && error.response.status === 404) {\n        onError('No hay clientes que cumplan los criterios de fidelización');\n      } else {\n        onError('Error al generar el reporte. Por favor intente nuevamente.');\n      }\n    } finally {\n      setGenerando(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white rounded-lg shadow-md p-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-bold text-gray-800 mb-4\",\n      children: \"Reporte de Fidelizaci\\xF3n\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-600 mb-4\",\n      children: \"Genera un reporte en Excel con los clientes elegibles para fidelizaci\\xF3n. Se incluyen clientes con compras superiores a $5'000.000 COP en el \\xFAltimo mes.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleGenerarReporte,\n      disabled: generando,\n      className: \"px-6 py-3 bg-purple-600 text-white font-medium rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 disabled:bg-gray-400 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105 active:scale-95\",\n      children: generando ? 'Generando...' : 'Generar Reporte Excel'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 5\n  }, this);\n};\n_s(ReporteFidelizacion, \"+LTp2XCMak7cVrHfAVWLsCqAUAc=\");\n_c = ReporteFidelizacion;\nexport default ReporteFidelizacion;\nvar _c;\n$RefreshReg$(_c, \"ReporteFidelizacion\");","map":{"version":3,"names":["React","useState","reporteAPI","saveAs","jsxDEV","_jsxDEV","ReporteFidelizacion","onError","_s","generando","setGenerando","handleGenerarReporte","response","generarFidelizacion","blob","Blob","data","type","fecha","Date","toISOString","split","filename","error","console","status","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","_c","$RefreshReg$"],"sources":["/home/scancino/Projects/Cinte-Test-Net/frontend/src/components/ReporteFidelizacion.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { reporteAPI } from '../services/api';\r\nimport { saveAs } from 'file-saver';\r\n\r\nconst ReporteFidelizacion = ({ onError }) => {\r\n  const [generando, setGenerando] = useState(false);\r\n\r\n  const handleGenerarReporte = async () => {\r\n    try {\r\n      setGenerando(true);\r\n      const response = await reporteAPI.generarFidelizacion();\r\n      const blob = new Blob([response.data], {\r\n        type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\r\n      });\r\n      const fecha = new Date().toISOString().split('T')[0];\r\n      const filename = `reporte_fidelizacion_${fecha}.xlsx`;\r\n      saveAs(blob, filename);\r\n    } catch (error) {\r\n      console.error('Error al generar reporte:', error);\r\n      if (error.response && error.response.status === 404) {\r\n        onError('No hay clientes que cumplan los criterios de fidelización');\r\n      } else {\r\n        onError('Error al generar el reporte. Por favor intente nuevamente.');\r\n      }\r\n    } finally {\r\n      setGenerando(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n      <h2 className=\"text-2xl font-bold text-gray-800 mb-4\">Reporte de Fidelización</h2>\r\n      <p className=\"text-gray-600 mb-4\">\r\n        Genera un reporte en Excel con los clientes elegibles para fidelización.\r\n        Se incluyen clientes con compras superiores a $5'000.000 COP en el último mes.\r\n      </p>\r\n      <button\r\n        onClick={handleGenerarReporte}\r\n        disabled={generando}\r\n        className=\"px-6 py-3 bg-purple-600 text-white font-medium rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 disabled:bg-gray-400 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105 active:scale-95\"\r\n      >\r\n        {generando ? 'Generando...' : 'Generar Reporte Excel'}\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReporteFidelizacion;\r\n\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,UAAU,QAAQ,iBAAiB;AAC5C,SAASC,MAAM,QAAQ,YAAY;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpC,MAAMC,mBAAmB,GAAGA,CAAC;EAAEC;AAAQ,CAAC,KAAK;EAAAC,EAAA;EAC3C,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGT,QAAQ,CAAC,KAAK,CAAC;EAEjD,MAAMU,oBAAoB,GAAG,MAAAA,CAAA,KAAY;IACvC,IAAI;MACFD,YAAY,CAAC,IAAI,CAAC;MAClB,MAAME,QAAQ,GAAG,MAAMV,UAAU,CAACW,mBAAmB,CAAC,CAAC;MACvD,MAAMC,IAAI,GAAG,IAAIC,IAAI,CAAC,CAACH,QAAQ,CAACI,IAAI,CAAC,EAAE;QACrCC,IAAI,EAAE;MACR,CAAC,CAAC;MACF,MAAMC,KAAK,GAAG,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;MACpD,MAAMC,QAAQ,GAAG,wBAAwBJ,KAAK,OAAO;MACrDf,MAAM,CAACW,IAAI,EAAEQ,QAAQ,CAAC;IACxB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;MACjD,IAAIA,KAAK,CAACX,QAAQ,IAAIW,KAAK,CAACX,QAAQ,CAACa,MAAM,KAAK,GAAG,EAAE;QACnDlB,OAAO,CAAC,2DAA2D,CAAC;MACtE,CAAC,MAAM;QACLA,OAAO,CAAC,4DAA4D,CAAC;MACvE;IACF,CAAC,SAAS;MACRG,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC;EAED,oBACEL,OAAA;IAAKqB,SAAS,EAAC,mCAAmC;IAAAC,QAAA,gBAChDtB,OAAA;MAAIqB,SAAS,EAAC,uCAAuC;MAAAC,QAAA,EAAC;IAAuB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAClF1B,OAAA;MAAGqB,SAAS,EAAC,oBAAoB;MAAAC,QAAA,EAAC;IAGlC;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC,eACJ1B,OAAA;MACE2B,OAAO,EAAErB,oBAAqB;MAC9BsB,QAAQ,EAAExB,SAAU;MACpBiB,SAAS,EAAC,gRAAgR;MAAAC,QAAA,EAEzRlB,SAAS,GAAG,cAAc,GAAG;IAAuB;MAAAmB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC/C,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACN,CAAC;AAEV,CAAC;AAACvB,EAAA,CAzCIF,mBAAmB;AAAA4B,EAAA,GAAnB5B,mBAAmB;AA2CzB,eAAeA,mBAAmB;AAAC,IAAA4B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}